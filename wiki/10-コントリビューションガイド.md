# 👥 10. コントリビューションガイド

このセクションでは、Test App への開発参加方法と開発ルールについて説明します。

---

## 🎯 開発への参加方法

### 前提条件

- Git の基本知識
- Java 21 と Node.js 18 以上
- Docker および Docker Compose
- 任意の IDE（VS Code、IntelliJ IDEA 推奨）

---

## 🔀 Git ワークフロー

### ブランチ戦略（Git Flow）

```
main（本番リリース用）
  ↑
release/1.0.0（リリース準備）
  ↑
develop（開発メインブランチ）
  ↑
feature/新機能名（機能開発）
hotfix/バグ修正名（緊急修正）
```

### ブランチ命名規則

| ブランチ種類 | 命名例 | 説明 |
|-------------|--------|------|
| **feature** | `feature/add-memo-delete` | 新機能開発 |
| **bugfix** | `bugfix/fix-login-error` | バグ修正 |
| **hotfix** | `hotfix/security-patch` | 緊急修正 |
| **docs** | `docs/update-readme` | ドキュメント更新 |
| **refactor** | `refactor/optimize-query` | リファクタリング |

### ブランチの作成と操作

```bash
# 最新の develop ブランチを取得
git checkout develop
git pull origin develop

# 新しいブランチを作成
git checkout -b feature/新機能名

# ブランチを確認
git branch -a

# リモートにプッシュ
git push origin feature/新機能名
```

---

## 📝 コーディング規約

### Java 規約

#### ネーミング規則

```java
// クラス名：PascalCase
public class TodoController { }

// メソッド名：camelCase
public void getUserTodos() { }

// 定数：UPPER_SNAKE_CASE
public static final int MAX_TODO_LENGTH = 200;

// ローカル変数：camelCase
LocalDateTime createdAt = LocalDateTime.now();
```

#### コードスタイル

```java
// インデント：2 スペース
public class Example {
  public void method() {
    // 処理
  }
}

// 行の長さ：最大 120 文字
public void longMethodWithManyParameters(
    String param1, String param2, String param3) {
  // 処理
}

// 括弧：Java Convention
if (condition) {
  // 処理
} else {
  // 処理
}
```

#### アノテーション使用

```java
// Lombok を活用してボイラープレート削減
@Data
@Entity
@Table(name = "todos")
public class Todo {
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Long id;
  
  @Column(nullable = false)
  private String title;
}

// 明示的なアノテーション
@Service
@RequiredArgsConstructor
@Transactional
public class TodoService {
  private final TodoRepository todoRepository;
}
```

#### 例外処理

```java
// 具体的な例外をキャッチ
try {
  // 処理
} catch (IOException e) {
  logger.error("ファイル読み込みエラー", e);
  throw new RuntimeException("処理失敗", e);
}

// NullPointerException は避ける
if (user != null && user.getTodos() != null) {
  // 処理
}
// または Optional を使用
Optional.ofNullable(user)
  .map(User::getTodos)
  .ifPresent(todos -> { /* 処理 */ });
```

### TypeScript/Vue.js 規約

#### ネーミング規則

```typescript
// コンポーネント名：PascalCase
export default {
  name: 'TodoList'
}

// 変数：camelCase
const todoList = ref([]);

// 定数：UPPER_SNAKE_CASE
const MAX_TODO_LENGTH = 200;

// プライベートプロパティ：先頭にアンダースコア
const _internalState = ref({});
```

#### ファイル構成

```typescript
// コンポーネントファイル
// 1. インポート
import { ref, computed } from 'vue'

// 2. 型定義
interface Todo {
  id: number;
  title: string;
}

// 3. コンポーネント定義
export default {
  setup() {
    // 処理
  }
}
```

#### 非同期処理

```typescript
// async/await を推奨
async function fetchTodos() {
  try {
    const response = await api.getTodos();
    todos.value = response.data;
  } catch (error) {
    console.error('エラー:', error);
  }
}

// Promise チェーンは避ける
api.getTodos()
  .then(response => todos.value = response.data)
  .catch(error => console.error(error));
```

---

## 🧪 テスト要件

### テスト対象

すべての新機能・修正には以下のテストが必須：

- [ ] **ユニットテスト** - Service、Repository 層
- [ ] **統合テスト** - Controller 層
- [ ] **E2E テスト** - UI 操作シナリオ

### テスト実行

```bash
# Backend テスト
cd backend
./gradlew test

# Frontend テスト
cd frontend
npm run test:headless

# カバレッジ確認
./gradlew jacocoTestReport
```

### テストカバレッジ基準

- **Service 層：** 90% 以上
- **Repository 層：** 85% 以上
- **Controller 層：** 80% 以上
- **全体：** 80% 以上

---

## 📋 プルリクエスト（PR）ガイドライン

### PR の作成方法

```bash
# 1. 最新の develop にリベース
git fetch origin
git rebase origin/develop

# 2. コミットメッセージを確認
git log origin/develop..HEAD

# 3. リモートにプッシュ
git push origin feature/新機能名

# 4. GitHub で PR を作成
# https://github.com/cocomomojo/test_app/pull/new/feature/新機能名
```

### PR テンプレート

```markdown
## 概要
新機能 / バグ修正 / リファクタリング の説明

## 変更内容
- 変更 1
- 変更 2
- 変更 3

## 関連 Issue
Closes #123

## テスト
- [ ] ユニットテスト実施
- [ ] 統合テスト実施
- [ ] E2E テスト実施
- [ ] 手動確認実施

## チェックリスト
- [ ] コードスタイルに従っている
- [ ] ドキュメントを更新している
- [ ] テストをすべてパスしている
- [ ] 不要なコメントやデバッグコードを削除している

## スクリーンショット/動画（UI 変更の場合）
[画像やリンク]
```

### PR レビュー対象

すべての PR は以下の項目をレビューします：

- [ ] コード品質（SOLID 原則、設計パターン）
- [ ] テストカバレッジ
- [ ] パフォーマンス影響
- [ ] セキュリティ問題
- [ ] ドキュメント更新
- [ ] 命名規則の遵守

---

## 🐛 Issue の報告

### Issue テンプレート

**Bug Report：**
```markdown
## 概要
バグの説明

## 再現手順
1. [手順 1]
2. [手順 2]
3. [手順 3]

## 期待される動作
...

## 実際の動作
...

## 環境
- OS: macOS 12.0
- ブラウザ: Chrome 120
- Java: 21
- Node.js: 18

## スクリーンショット
[画像]
```

**Feature Request：**
```markdown
## 概要
要望の説明

## ユースケース
...

## 期待される効果
...

## 実装案（オプション）
...
```

---

## 📚 ドキュメント更新

### ドキュメント対象

以下の変更時には必ずドキュメントを更新：

- [ ] API エンドポイント追加・変更
- [ ] データモデル変更
- [ ] 新機能追加
- [ ] 設定項目追加
- [ ] デプロイ手順変更

### ドキュメント形式

- Markdown 形式（`.md`）
- UTF-8 エンコーディング
- 日本語で記述
- 見出しは `#` で階層化

---

## 🔍 コードレビューチェックリスト

### セルフレビュー（送信前に自分で確認）

- [ ] 意図しないコードが含まれていない
- [ ] デバッグコードが削除されている
- [ ] コメントが適切である
- [ ] 関連するテストが含まれている
- [ ] PR の説明が明確である

### レビュアー向け

```java
// ❌ 避けるべきコード
public void processData(List items) {
  for (int i = 0; i < items.size(); i++) {
    Item item = (Item) items.get(i);
    // 処理
  }
}

// ✅ 推奨コード
public void processData(List<Item> items) {
  items.forEach(item -> {
    // 処理
  });
}
```

---

## 🚀 開発環境のセットアップ

### IDE 設定（VS Code）

```json
// .vscode/settings.json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "[java]": {
    "editor.defaultFormatter": "redhat.java",
    "editor.formatOnSave": true
  },
  "java.format.settings.profile": "GoogleStyle",
  "java.checkstyle.enable": true
}
```

### IDE 設定（IntelliJ IDEA）

- Code Style → Java：Google Style Guide
- Code Style → JavaScript：Prettier
- Inspections：All enabled
- Plugin：Lombok, CheckStyle

---

## 📞 コミュニティ

### サポート

問題が発生した場合：

1. [GitHub Issues](https://github.com/cocomomojo/test_app/issues) で検索
2. 既知の問題がない場合は、新しい Issue を作成
3. または、ディスカッションで質問

### 連絡先

- **チャット:** Discord/Slack（リンク）
- **メール:** admin@example.com
- **Issue:** GitHub Issues

---

## 📚 次のステップ

- [まとめ](./11-まとめ.md) - プロジェクト総括
- [目次](./00-目次.md) - ドキュメント一覧
