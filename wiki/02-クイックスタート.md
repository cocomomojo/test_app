# ğŸš€ 2. ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€Test App ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§å‹•ä½œã•ã›ã‚‹ãŸã‚ã®æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## ğŸ“‹ å‰ææ¡ä»¶

### å¿…é ˆãƒ„ãƒ¼ãƒ«

ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

| ãƒ„ãƒ¼ãƒ« | å¿…é ˆ/æ¨å¥¨ | æœ€å°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« |
|--------|----------|----------|-----------|
| ğŸ³ Docker | **å¿…é ˆ** | 20.10+ | [docker.com](https://www.docker.com/) |
| ğŸ”§ Docker Compose | **å¿…é ˆ** | 2.0+ | Docker Desktop ã«å«ã¾ã‚Œã‚‹ |
| ğŸ™ Git | **å¿…é ˆ** | 2.30+ | [git-scm.com](https://git-scm.com/) |
| ğŸ“¦ Node.js | æ¨å¥¨ | 18+ | [nodejs.org](https://nodejs.org/) |
| â˜• Java | æ¨å¥¨ | 21 | [java.com](https://www.java.com/) |

### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªã‚³ãƒãƒ³ãƒ‰

```bash
docker --version
docker compose version
git --version
node --version
java --version
```

---

## ğŸ”½ ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/cocomomojo/test_app.git
cd test_app

# ãƒ–ãƒ©ãƒ³ãƒã‚’ç¢ºèª
git branch -a

# ã¾ãŸã¯ SSH ã§ã‚¯ãƒ­ãƒ¼ãƒ³
git clone git@github.com:cocomomojo/test_app.git
```

---

## ğŸ³ Docker Compose ã‚’ä½¿ç”¨ã—ãŸèµ·å‹•ï¼ˆæ¨å¥¨ï¼‰

æœ€ã‚‚ç°¡å˜ã§ã€ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ãŒè‡ªå‹•çš„ã«èµ·å‹•ã—ã¾ã™ã€‚

### 1. ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰ç§»å‹•
cd infra

# ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ã® docker-compose ã‚’å®Ÿè¡Œ
docker compose -f docker-compose.local.yml up -d --build
```

**èµ·å‹•ã•ã‚Œã‚‹ã‚µãƒ¼ãƒ“ã‚¹ï¼š**

| ã‚µãƒ¼ãƒ“ã‚¹ | ãƒãƒ¼ãƒˆ | èª¬æ˜ |
|---------|--------|------|
| ğŸƒ Backend (Spring Boot) | 8080 | ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ |
| ğŸ–– Frontend (Vite dev server) | 5173 | é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ |
| ğŸ—„ï¸ MySQL | 3306 | ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| â˜ï¸ LocalStack (S3 Mock) | 9000 | ãƒ­ãƒ¼ã‚«ãƒ« S3 ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ |

### 2. å‹•ä½œç¢ºèª

```bash
# ã‚³ãƒ³ãƒ†ãƒŠã®çŠ¶æ…‹ã‚’ç¢ºèªï¼ˆã™ã¹ã¦ Up ã«ãªã‚‹ã¾ã§å¾…ã¤ï¼‰
docker compose -f docker-compose.local.yml ps

# Backend ã® Health Check
curl http://localhost:8080/actuator/health

# ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ï¼š
# {"status":"UP","components":{"db":{"status":"UP"}}}
```

### 3. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹

```
Frontend: http://localhost:5173
Backend API: http://localhost:8080/api
H2 DB Console: http://localhost:8080/h2-consoleï¼ˆé–‹ç™ºç”¨ï¼‰
```

**ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5173 ã‚’é–‹ãã€ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚**

### 4. ãƒ­ã‚°ã®ç¢ºèª

```bash
# ã™ã¹ã¦ã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°ã‚’è¡¨ç¤º
docker compose -f docker-compose.local.yml logs

# Backend ã®ãƒ­ã‚°ã®ã¿è¡¨ç¤ºï¼ˆæœ€æ–° 200 è¡Œï¼‰
docker compose -f docker-compose.local.yml logs backend --tail=200

# ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ­ã‚°ã‚’è¿½è·¡
docker compose -f docker-compose.local.yml logs -f backend

# Frontend ã®ãƒ­ã‚°ã‚’è¡¨ç¤º
docker compose -f docker-compose.local.yml logs frontend
```

### 5. ã‚µãƒ¼ãƒ“ã‚¹ã®åœæ­¢

```bash
# ã‚µãƒ¼ãƒ“ã‚¹ã‚’åœæ­¢
cd infra
docker compose -f docker-compose.local.yml down

# ãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ï¼‰ã‚‚å‰Šé™¤ã™ã‚‹å ´åˆ
docker compose -f docker-compose.local.yml down -v

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚‚å‰Šé™¤ã™ã‚‹å ´åˆ
docker compose -f docker-compose.local.yml down -v --rmi all
```

---

## ğŸ’» Docker ã‚’ä½¿ã‚ãªã„å®Ÿè¡Œï¼ˆé–‹ç™ºè€…å‘ã‘ï¼‰

### Backend ã®èµ·å‹•ï¼ˆSpring Bootï¼‰

```bash
cd backend

# Gradle Wrapper ã‚’ä½¿ç”¨ã—ã¦èµ·å‹•
./gradlew bootRun

# åˆ¥æ–¹æ³•ï¼šJAR ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ“ãƒ«ãƒ«ã—ã¦å®Ÿè¡Œ
./gradlew bootJar
java -jar build/libs/test-app-*.jar --spring.profiles.active=local
```

**è¦ä»¶ï¼š**
- Java 21 ä»¥ä¸Š
- MySQL 8.0ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œä¸­ã¾ãŸã¯ docker run ã§èµ·å‹•ï¼‰
- Gradleï¼ˆã¾ãŸã¯ gradlew ã‚’ä½¿ç”¨ï¼‰

### Frontend ã®èµ·å‹•ï¼ˆVue.js + Viteï¼‰

```bash
cd frontend

# ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
npm run dev

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:5173 ã«ã‚¢ã‚¯ã‚»ã‚¹
```

**è¦ä»¶ï¼š**
- Node.js 18 ä»¥ä¸Š
- npm ã¾ãŸã¯ yarn

---

## ğŸ” ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼æƒ…å ±

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆ

ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã§ä½¿ç”¨å¯èƒ½ãªãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼š

| ãƒ¦ãƒ¼ã‚¶ãƒ¼å | ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ | èª¬æ˜ |
|-----------|-----------|------|
| `user` | `password` | ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| `admin` | `admin123` | ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ |

**åˆå›ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®æ³¨æ„ï¼š**
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯ãƒ¡ãƒ¢ãƒªã«ä¿æŒã•ã‚Œã¾ã™
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•ã™ã‚‹ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯å¤±ã‚ã‚Œã¾ã™

---

## ğŸ§ª E2E ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

### Playwright ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
cd frontend

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆHeaded ãƒ¢ãƒ¼ãƒ‰ï¼šãƒ–ãƒ©ã‚¦ã‚¶ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
npm run test

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆHeadless ãƒ¢ãƒ¼ãƒ‰ï¼šãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œï¼‰
npm run test:headless

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npx playwright test tests/login.spec.ts

# ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤º
npx playwright show-report
```

### Allure ãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ

```bash
cd frontend

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ Allure ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
npm run test:allure

# ãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤º
npx allure serve allure-results
```

---

## ğŸ“Š å‹•ä½œç¢ºèªãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

èµ·å‹•å¾Œã€ä»¥ä¸‹ã®é …ç›®ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

- [ ] Docker ã‚³ãƒ³ãƒ†ãƒŠãŒã™ã¹ã¦ Up çŠ¶æ…‹
- [ ] `curl http://localhost:8080/actuator/health` ã§ `"status":"UP"` ãŒè¿”ã•ã‚Œã‚‹
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:5173` ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹
- [ ] ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆuser/passwordï¼‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ãã‚‹
- [ ] ãƒ­ã‚°ã‚¤ãƒ³å¾Œã« Dashboard ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ToDoãƒªã‚¹ãƒˆç”»é¢ã«é·ç§»ã§ãã‚‹
- [ ] ãƒ¡ãƒ¢ç®¡ç†ç”»é¢ã«é·ç§»ã§ãã‚‹

---

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒ¼ãƒˆãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹

```bash
# ãƒãƒ¼ãƒˆ 8080 ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’ç¢ºèªï¼ˆLinux/Macï¼‰
lsof -i :8080

# Windows ã®å ´åˆ
netstat -ano | findstr :8080

# ãƒãƒ¼ãƒˆã‚’è§£æ”¾ã™ã‚‹å ´åˆ
kill -9 <PID>  # Linux/Mac
taskkill /PID <PID> /F  # Windows
```

### MySQL æ¥ç¶šã‚¨ãƒ©ãƒ¼

```bash
# MySQL ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’ç¢ºèª
docker compose -f docker-compose.local.yml logs mysql

# MySQL ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
docker exec -it $(docker ps -q -f ancestor=mysql:8.0) mysql -u root -ptest123 -e "SELECT 1;"
```

### Frontend ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
rm -rf frontend/node_modules frontend/package-lock.json

# å†åº¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd frontend
npm install
npm run dev
```

### Docker ãƒ‡ãƒ¼ãƒ¢ãƒ³ãŒèµ·å‹•ã—ã¦ã„ãªã„

```bash
# Linux ã®å ´åˆ
sudo systemctl start docker

# Mac ã¾ãŸã¯ Windows ã¯ Docker Desktop ã‚’èµ·å‹•
```

---

## ğŸ“š æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](./03-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£.md) - ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆã®è©³ç´°
- [ãƒªãƒã‚¸ãƒˆãƒªæ§‹é€ ](./04-ãƒªãƒã‚¸ãƒˆãƒªæ§‹é€ .md) - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ
- [APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](./07-APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ.md) - API ä»•æ§˜
- [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](./08-ãƒ†ã‚¹ãƒˆæˆ¦ç•¥.md) - ãƒ†ã‚¹ãƒˆæ–¹æ³•
